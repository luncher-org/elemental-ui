(("undefined"!==typeof self?self:this)["webpackJsonpelemental_2_0_1"]=("undefined"!==typeof self?self:this)["webpackJsonpelemental_2_0_1"]||[]).push([[5],{"0461":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("h2",{directives:[{name:"t",rawName:"v-t",value:"elemental.clusterGroup.selector.label",expression:"'elemental.clusterGroup.selector.label'"}],staticClass:"mt-20 mb-20"}),t("MatchExpressions",{attrs:{mode:e.mode,type:e.elementalType,value:e.expressions,"show-remove":!1,"keys-select-options":e.machineInventorySelectorKeyOptions},on:{input:function(t){return e.matchChanged(t)}}}),e.matchingMachineInventories?t("Banner",{attrs:{color:e.matchingMachineInventories.isNone||e.matchingMachineInventories.isAll?"warning":"success"}},[e.matchingMachineInventories.isAll?t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("elemental.clusterGroup.selector.matchesAll",e.matchingMachineInventories),expression:"t('elemental.clusterGroup.selector.matchesAll', matchingMachineInventories)"}]}):e.matchingMachineInventories.isNone?t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("elemental.clusterGroup.selector.matchesNone",e.matchingMachineInventories),expression:"t('elemental.clusterGroup.selector.matchesNone', matchingMachineInventories)"}]}):t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("elemental.clusterGroup.selector.matchesSome",e.matchingMachineInventories),expression:"t('elemental.clusterGroup.selector.matchesSome', matchingMachineInventories)"}]})]):e._e()],1)},n=[],l=s("711b"),c=s("305c"),i=s("6418"),r=s("e24b"),o=s("2879"),h=s("05ca"),m=s.n(h),p=s("c41f"),u={components:{MatchExpressions:l["a"],Banner:i["a"]},mixins:[c["a"]],async fetch(){this.machineInventories=await this.$store.dispatch("management/findAll",{type:p["e"].MACHINE_INVENTORIES}),this.machineInventorySelectorKeyOptions=this.getUniqueLabels(this.machineInventories).map(e=>({label:e,value:e})),this.updateMatchingMachineInventories()},data(){var e;null!==(e=this.value.spec)&&void 0!==e&&null!==(e=e.template)&&void 0!==e&&null!==(e=e.spec)&&void 0!==e&&e.selector||(this.value.spec.template.spec=this.value.spec.template.spec||{},this.value.spec.template.spec.selector={matchExpressions:[],matchLabels:{}});const t=this.$store.getters["elemental/createClusterElements"];var s;t.length&&(this.value.spec.template.spec.selector.matchExpressions.push({key:"create-cluster-selector",operator:"In",values:[t[0].metadata.labels["create-cluster-selector"]]}),null!==(s=this.value.spec)&&void 0!==s&&null!==(s=s.template)&&void 0!==s&&null!==(s=s.spec)&&void 0!==s&&null!==(s=s.selector)&&void 0!==s&&s.matchLabels||(this.value.spec.template.spec.selector.matchLabels={}),this.value.spec.template.spec.selector.matchLabels["create-cluster-selector"]=t[0].metadata.labels["create-cluster-selector"],this.$store.dispatch("elemental/updateCreateClusterElements",[]));const a=Object(o["a"])(this.value.spec.template.spec.selector.matchLabels||{},this.value.spec.template.spec.selector.matchExpressions||[]);return{elementalType:p["c"],machineInventories:null,matchingMachineInventories:null,machineInventorySelectorKeyOptions:null,expressions:a}},methods:{set:r["k"],getUniqueLabels(e){const t=[];return e.forEach(e=>{var s,a;if(null!==(s=e.metadata)&&void 0!==s&&s.labels&&Object.keys(null===(a=e.metadata)||void 0===a?void 0:a.labels).length){var n;const s=Object.keys(null===(n=e.metadata)||void 0===n?void 0:n.labels);s.forEach(e=>{t.includes(e)||t.push(e)})}}),t},matchChanged(e){const{matchLabels:t,matchExpressions:s}=Object(o["c"])(e);Object(r["k"])(this,"expressions",e),Object(r["k"])(this,"value.spec.template.spec.selector.matchLabels",t),Object(r["k"])(this,"value.spec.template.spec.selector.matchExpressions",s),this.updateMatchingMachineInventories()},updateMatchingMachineInventories:m()((function(){var e;const t=this.machineInventories,s=Object(o["b"])(t,this.expressions),a=s.length||0,n=null===(e=s[0])||void 0===e?void 0:e.nameDisplay;this.matchingMachineInventories={matched:a,total:t.length,isAll:a===t.length,isNone:0===a,sample:n}}),250,{leading:!0})}},v=u,d=s("d802"),b=Object(d["a"])(v,a,n,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=elemental-2.0.1.umd.min.machine-config.js.map