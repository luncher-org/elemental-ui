{"version":3,"sources":["webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosversionchannel.vue","webpack://elemental-1.3.0-rc1/edit/elemental.cattle.io.managedosversionchannel.vue","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosversionchannel.vue?6ae2","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosversionchannel.vue?7f81","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.0-rc1/edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.machineregistration.vue?8665","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.machineregistration.vue?baf7","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.3.0-rc1/edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosimage.vue?57a5","webpack://elemental-1.3.0-rc1/./edit/elemental.cattle.io.managedosimage.vue?d684"],"names":["render","_vm","this","_c","_self","value","attrs","doneRoute","mode","errors","on","e","save","done","staticClass","_v","_s","t","model","callback","$$v","expression","spec","options","image","$set","trim","_e","staticRenderFns","name","components","Loading","LabeledInput","CruResource","NameNsDescription","mixins","CreateEditView","props","type","Object","required","String","component","isFormValid","class","hasBeenCreated","ref","editorMode","cloudConfig","isView","onFileSelected","_l","yamlErrors","err","i","key","directives","rawName","machineInventoryLabels","$event","updateLabels","machineInventoryAnnotations","setAnnotations","labels","setLabels","annotations","YamlEditor","KeyValue","Banner","FileSelector","Tabbed","Tab","data","saferDump","watch","handler","neu","parsed","jsyaml","load","exceptionToErrorsArray","immediate","computed","isCreate","_CREATE","_EDIT","EDITOR_MODES","VIEW_CODE","EDIT_CODE","id","methods","saveCb","$router","replace","detailLocation","ev","keyLengthExceeded","keyPrefixLengthExceeded","keyNameLengthExceeded","labelLengthExceeded","keys","length","forEach","includes","prefix","split","push","$refs","yamleditor","updateValue","clusterTargetOptions","handleClusterTargetChange","clusterTargets","useManagedOsImages","managedOSVersionOptions","handleManagedOSVersionNameChange","osVersionSelected","osImage","STRING_SEPARATOR","LabeledSelect","RadioGroup","hash","rancherClusters","$store","dispatch","CAPI","RANCHER_CLUSTER","osGroups","ELEMENTAL_SCHEMA_IDS","MANAGED_OS_IMAGES","osVersions","MANAGED_OS_VERSIONS","osVersionChannels","MANAGED_OS_VERSION_CHANNELS","res","allHash","elementalClusters","filterForElementalClusters","_VIEW","_this$value","_this$value3","_this$value2","managedOSVersionName","_this$value4","targetsArray","ct","clusterName","targetableClusters","filterForUsedElementalClustersOnManagedOs","map","cluster","label","out","channel","versions","filter","version","_version$metadata","_this$value6","_version$metadata2","_version$spec","channelExists","metadata","ownerReferences","find","_this$value5","_channel$metadata","namespace","kind","v","val"],"mappings":"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","file":"elemental-1.3.0-rc1.umd.min.edit.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osversionchannels.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osversionchannels.create.spec')))]),_c('LabeledInput',{attrs:{\"data-testid\":\"os-version-channel-path\",\"label\":_vm.t('elemental.osversionchannels.create.registryUri.label'),\"placeholder\":_vm.t('elemental.osversionchannels.create.registryUri.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.options.image),callback:function ($$v) {_vm.$set(_vm.value.spec.options, \"image\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.options.image\"}})],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nexport default {\n  name:       'ManagedOsVersionChannelEditView',\n  components: {\n    Loading, LabeledInput, CruResource, NameNsDescription\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osversionchannels.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osversionchannels.create.spec') }}</h3>\n        <LabeledInput\n          v-model.trim=\"value.spec.options.image\"\n          data-testid=\"os-version-channel-path\"\n          :label=\"t('elemental.osversionchannels.create.registryUri.label')\"\n          :placeholder=\"t('elemental.osversionchannels.create.registryUri.placeholder', null, true)\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=template&id=55985480\"\nimport script from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors,\"validation-passed\":_vm.isFormValid},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mb-40\",class:{'mt-40': !_vm.hasBeenCreated }},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.cloudConfiguration')))]),_c('YamlEditor',{ref:\"yamleditor\",staticClass:\"mb-20\",attrs:{\"editor-mode\":_vm.editorMode},model:{value:(_vm.cloudConfig),callback:function ($$v) {_vm.cloudConfig=$$v},expression:\"cloudConfig\"}}),(!_vm.isView)?_c('div',{staticClass:\"mb-20\"},[_c('FileSelector',{staticClass:\"btn role-secondary\",attrs:{\"data-testid\":\"read-from-file-btn\",\"label\":_vm.t('elemental.machineRegistration.create.readFromFile')},on:{\"selected\":_vm.onFileSelected}})],1):_vm._e(),_vm._l((_vm.yamlErrors),function(err,i){return _c('Banner',{key:i,attrs:{\"color\":\"error\",\"label\":err}})})],2)]),_c('div',{staticClass:\"row mb-40\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',{staticClass:\"mt-10\"},[_vm._v(\" \"+_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotations'))+\" \")]),_c('Tabbed',{attrs:{\"data-testid\":\"labels-and-annotations-block\"}},[_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineInv\",\"name\":\"machine-inventory\",\"data-testid\":\"mach-inv-tab\",\"weight\":3}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\",\"data-testid\":\"mach-inv-banner\"}},[_c('div',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)),expression:\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\"}]})]),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"data-testid\":\"add-label-mach-inv\",\"value\":_vm.value.machineInventoryLabels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.updateLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"data-testid\":\"add-annotation-mach-inv\",\"value\":_vm.value.machineInventoryAnnotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event, 'machineInventoryAnnotations', true)}}})],1)],1),_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineReg\",\"name\":\"machine-reg\",\"data-testid\":\"mach-reg-tab\",\"weight\":2}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\",\"data-testid\":\"mach-reg-banner\"}},[_c('div',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)),expression:\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\"}]})]),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"data-testid\":\"add-label-mach-reg\",\"value\":_vm.value.labels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"data-testid\":\"add-annotation-mach-reg\",\"value\":_vm.value.annotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event)}}})],1)],1)],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { Banner } from '@components/Banner';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\n\nexport default {\n  name:       'MachineRegistrationEditView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    KeyValue,\n    Banner,\n    FileSelector,\n    NameNsDescription,\n    Tabbed,\n    Tab\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  data() {\n    return {\n      cloudConfig: typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      yamlErrors:  null,\n      isFormValid: true\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  methods: {\n    async save(saveCb) {\n      this.errors = [];\n      try {\n        await this.value.save();\n        saveCb(true);\n\n        if (this.isCreate) {\n          this.$router.replace(this.value.detailLocation);\n        } else {\n          this.done();\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        saveCb(false);\n      }\n    },\n    updateLabels(ev) {\n      this.value.setLabels(ev, 'machineInventoryLabels', true);\n      let keyLengthExceeded = false;\n      let keyPrefixLengthExceeded = false;\n      let keyNameLengthExceeded = false;\n      let labelLengthExceeded = false;\n\n      this.errors = [];\n\n      if (this.value.spec.machineInventoryLabels && Object.keys(this.value.spec.machineInventoryLabels).length) {\n        Object.keys(this.value.spec.machineInventoryLabels).forEach((key) => {\n          // check length of \"key\" in key-value\n          if (key.includes('/')) {\n            const prefix = key.split('/')[0];\n            const name = key.split('/')[1];\n\n            if (prefix.length > 253) {\n              keyPrefixLengthExceeded = true;\n            }\n\n            if (name.length > 63) {\n              keyNameLengthExceeded = true;\n            }\n          } else if (key.length > 63) {\n            keyLengthExceeded = true;\n          }\n\n          // check length of \"value\" in key-value\n          if (this.value.spec.machineInventoryLabels[key].length > 63) {\n            labelLengthExceeded = true;\n          }\n        });\n      }\n\n      if (labelLengthExceeded || keyLengthExceeded || keyPrefixLengthExceeded || keyNameLengthExceeded) {\n        if (labelLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelValueLength'));\n        }\n        if (keyLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyLength'));\n        }\n        if (keyPrefixLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyPrefixLength'));\n        }\n        if (keyNameLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyNameLength'));\n        }\n      } else {\n        this.isFormValid = true;\n      }\n    },\n    onFileSelected(value) {\n      const component = this.$refs.yamleditor;\n\n      if (component) {\n        component.updateValue(value);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"isFormValid\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mb-40\"\n      :class=\"{'mt-40': !hasBeenCreated }\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.create.configuration') }}</h3>\n        <NameNsDescription\n          v-model=\"value\"\n          :mode=\"mode\"\n          :description-hidden=\"true\"\n          :namespaced=\"false\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          ref=\"yamleditor\"\n          v-model=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n        <div\n          v-if=\"!isView\"\n          class=\"mb-20\"\n        >\n          <FileSelector\n            class=\"btn role-secondary\"\n            data-testid=\"read-from-file-btn\"\n            :label=\"t('elemental.machineRegistration.create.readFromFile')\"\n            @selected=\"onFileSelected\"\n          />\n        </div>\n        <Banner\n          v-for=\"(err, i) in yamlErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-40\">\n      <div class=\"col span-12\">\n        <h3 class=\"mt-10\">\n          {{ t('elemental.machineRegistration.create.labelsAndAnnotations') }}\n        </h3>\n        <Tabbed data-testid=\"labels-and-annotations-block\">\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineInv\"\n            name=\"machine-inventory\"\n            data-testid=\"mach-inv-tab\"\n            :weight=\"3\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              data-testid=\"mach-inv-banner\"\n            >\n              <div v-clean-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\" />\n            </Banner>\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                data-testid=\"add-label-mach-inv\"\n                :value=\"value.machineInventoryLabels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"updateLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                data-testid=\"add-annotation-mach-inv\"\n                :value=\"value.machineInventoryAnnotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event, 'machineInventoryAnnotations', true)\"\n              />\n            </div>\n          </Tab>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineReg\"\n            name=\"machine-reg\"\n            data-testid=\"mach-reg-tab\"\n            :weight=\"2\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              data-testid=\"mach-reg-banner\"\n            >\n              <div v-clean-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\" />\n            </Banner>\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                data-testid=\"add-label-mach-reg\"\n                :value=\"value.labels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                data-testid=\"add-annotation-mach-reg\"\n                :value=\"value.annotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event)\"\n              />\n            </div>\n          </Tab>\n        </Tabbed>\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=1a83434c&scoped=true\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a83434c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.spec')))]),_c('LabeledSelect',{staticClass:\"mb-20\",attrs:{\"data-testid\":\"cluster-target\",\"label\":_vm.t('elemental.osimage.create.targetCluster.label'),\"placeholder\":_vm.t('elemental.osimage.create.targetCluster.placeholder', null, true),\"mode\":_vm.mode,\"options\":_vm.clusterTargetOptions,\"multiple\":true},on:{\"input\":function($event){return _vm.handleClusterTargetChange($event)}},model:{value:(_vm.clusterTargets),callback:function ($$v) {_vm.clusterTargets=$$v},expression:\"clusterTargets\"}}),_c('RadioGroup',{staticClass:\"mb-20\",attrs:{\"data-testid\":\"upgrade-choice-selector\",\"name\":\"os-image-mode\",\"options\":[true, false],\"labels\":[_vm.t('elemental.osimage.create.radioOptions.osImages'), _vm.t('elemental.osimage.create.radioOptions.registry')],\"mode\":_vm.mode},model:{value:(_vm.useManagedOsImages),callback:function ($$v) {_vm.useManagedOsImages=$$v},expression:\"useManagedOsImages\"}}),(_vm.useManagedOsImages)?_c('div',[_c('LabeledSelect',{attrs:{\"data-testid\":\"os-version-box\",\"mode\":_vm.mode,\"options\":_vm.managedOSVersionOptions,\"label-key\":\"elemental.osimage.create.managedOsImage.label\",\"placeholder\":_vm.t('elemental.osimage.create.managedOsImage.placeholder', null, true),\"option-key\":\"value\"},on:{\"input\":function($event){return _vm.handleManagedOSVersionNameChange($event)}},model:{value:(_vm.osVersionSelected),callback:function ($$v) {_vm.osVersionSelected=$$v},expression:\"osVersionSelected\"}})],1):_c('div',[_c('LabeledInput',{attrs:{\"data-testid\":\"os-image-box\",\"label\":_vm.t('elemental.osimage.create.osImage.label'),\"placeholder\":_vm.t('elemental.osimage.create.osImage.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.osImage),callback:function ($$v) {_vm.$set(_vm.value.spec, \"osImage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.osImage\"}})],1)],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { allHash } from '@shell/utils/promise';\nimport { _CREATE, _EDIT, _VIEW } from '@shell/config/query-params';\nimport { CAPI } from '@shell/config/types';\nimport { ELEMENTAL_SCHEMA_IDS } from '../config/elemental-types';\nimport {\n  filterForElementalClusters,\n  filterForUsedElementalClustersOnManagedOs\n} from '../utils/elemental-utils';\n\nconst STRING_SEPARATOR = '_***_';\n\nexport default {\n  name:       'ManagedOsImagesEditView',\n  components: {\n    Loading, LabeledInput, LabeledSelect, CruResource, NameNsDescription, RadioGroup\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  async fetch() {\n    const hash = {};\n\n    hash.rancherClusters = this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER });\n    hash.osGroups = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_IMAGES });\n    hash.osVersions = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_VERSIONS });\n    hash.osVersionChannels = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_VERSION_CHANNELS });\n\n    const res = await allHash(hash);\n\n    this.elementalClusters = filterForElementalClusters(res.rancherClusters || []);\n    this.osGroups = res.osGroups || [];\n    this.osVersions = res.osVersions || [];\n    this.osVersionChannels = res.osVersionChannels || [];\n\n    if ((this.mode === _EDIT || this.mode === _VIEW)) {\n      // populate OS version selected\n      if (this.value?.spec?.managedOSVersionName) {\n        this.osVersionSelected = this.value?.spec?.managedOSVersionName;\n        this.useManagedOsImages = true;\n      } else {\n        this.useManagedOsImages = false;\n      }\n\n      // populate cluster targets selected\n      if (this.value?.spec?.clusterTargets?.length) {\n        const targetsArray = [];\n\n        this.value?.spec?.clusterTargets.forEach((ct) => {\n          targetsArray.push(ct.clusterName);\n        });\n\n        this.clusterTargets = targetsArray;\n      }\n    }\n  },\n  data() {\n    return {\n      elementalClusters:  [],\n      osGroups:           [],\n      osVersions:         [],\n      osVersionChannels:  [],\n      clusterTargets:     [],\n      useManagedOsImages: true,\n      osVersionSelected:  ''\n    };\n  },\n  computed: {\n    clusterTargetOptions() {\n      const targetableClusters = filterForUsedElementalClustersOnManagedOs(this.elementalClusters, this.osGroups);\n\n      return targetableClusters.map((cluster) => {\n        return {\n          label: cluster.name,\n          value: cluster.name\n        };\n      });\n    },\n    managedOSVersionOptions() {\n      const out = [];\n\n      this.osVersionChannels.forEach((channel) => {\n        const versions = this.osVersions.filter((version) => {\n          // use only the same namespace as the OS groups for now...\n          const channelExists = version.metadata?.ownerReferences.find(ref => ref.name === channel.name && this.value?.metadata?.namespace === channel.metadata?.namespace);\n\n          return channelExists && Object.keys(channelExists).length && this.value?.metadata?.namespace === version.metadata?.namespace && version.spec?.type === 'container';\n        });\n\n        if (versions.length) {\n          out.push({\n            kind:  'group',\n            label: this.t('elemental.osimage.create.managedOsImage.channel', { name: channel.name }),\n            value: this.t('elemental.osimage.create.managedOsImage.channel', { name: channel.name })\n          });\n\n          versions.forEach((v) => {\n            out.push({\n              label: v.name,\n              value: `${ channel.name }${ STRING_SEPARATOR }${ v.name }`\n            });\n          });\n        }\n      });\n\n      return out;\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n  methods: {\n    handleClusterTargetChange(ev) {\n      this.value.spec.clusterTargets = ev.map((val) => {\n        return { clusterName: val };\n      });\n    },\n    handleManagedOSVersionNameChange(ev) {\n      this.value.spec.managedOSVersionName = ev.split(STRING_SEPARATOR)[1];\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osimage.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osimage.create.spec') }}</h3>\n        <LabeledSelect\n          v-model=\"clusterTargets\"\n          class=\"mb-20\"\n          data-testid=\"cluster-target\"\n          :label=\"t('elemental.osimage.create.targetCluster.label')\"\n          :placeholder=\"t('elemental.osimage.create.targetCluster.placeholder', null, true)\"\n          :mode=\"mode\"\n          :options=\"clusterTargetOptions\"\n          :multiple=\"true\"\n          @input=\"handleClusterTargetChange($event)\"\n        />\n        <RadioGroup\n          v-model=\"useManagedOsImages\"\n          class=\"mb-20\"\n          data-testid=\"upgrade-choice-selector\"\n          name=\"os-image-mode\"\n          :options=\"[true, false]\"\n          :labels=\"[t('elemental.osimage.create.radioOptions.osImages'), t('elemental.osimage.create.radioOptions.registry')]\"\n          :mode=\"mode\"\n        />\n        <div v-if=\"useManagedOsImages\">\n          <LabeledSelect\n            v-model=\"osVersionSelected\"\n            data-testid=\"os-version-box\"\n            :mode=\"mode\"\n            :options=\"managedOSVersionOptions\"\n            label-key=\"elemental.osimage.create.managedOsImage.label\"\n            :placeholder=\"t('elemental.osimage.create.managedOsImage.placeholder', null, true)\"\n            option-key=\"value\"\n            @input=\"handleManagedOSVersionNameChange($event)\"\n          />\n        </div>\n        <div v-else>\n          <LabeledInput\n            v-model.trim=\"value.spec.osImage\"\n            data-testid=\"os-image-box\"\n            :label=\"t('elemental.osimage.create.osImage.label')\"\n            :placeholder=\"t('elemental.osimage.create.osImage.placeholder', null, true)\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosimage.vue?vue&type=template&id=3835b8d2\"\nimport script from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}