{"version":3,"sources":["webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue?7dc8","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue?96a3","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue?5792","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue?30d4","webpack://elemental-1.0.0/../../node_modules/@rancher/shell/machine-config/amazonec2.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue?2bf2","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/amazonec2.vue"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_h","$createElement","_c","_self","$fetchState","errors","_l","err","idx","key","attrs","stringify","_e","staticClass","mode","regionOptions","disabled","t","model","value","callback","$$v","$set","expression","zoneOptions","instanceOptions","option","scopedSlots","_u","fn","opt","kind","_v","_s","label","selectedNetwork","networkOptions","on","$event","updateNetwork","class","subLabel","isIamInstanceProfileNameRequired","uuid","ami","vpcId","securityGroupLabels","securityGroupMode","securityGroupOptions","kmsOptions","httpEndpoint","tags","updateTags","staticRenderFns","DEFAULT_GROUP","components","Banner","Loading","LabeledInput","LabeledSelect","Checkbox","RadioGroup","UnitInput","KeyValue","mixins","props","type","required","cluster","credentialId","id","region","cloudCredentialId","client","hash","data","ec2Client","kmsClient","credential","instanceInfo","regionInfo","canReadKms","kmsInfo","loadedRegionalFor","zoneInfo","vpcInfo","subnetInfo","securityGroupInfo","computed","defaultGroup","out","lastGroup","vpcs","isDefault","entry","subnetsByVpc","addObject","addObjects","description","watch","methods","initNetwork","obj","initTags","ary","test","component"],"mappings":"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","file":"elemental-1.0.0.umd.min.machine-config0.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./amazonec2.vue?vue&type=style&index=0&id=0f3ebcc0&prod&scoped=true&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5048ecf6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-0f3ebcc0]:after,.clearfix[data-v-0f3ebcc0]:before{content:\\\" \\\";display:table}.clearfix[data-v-0f3ebcc0]:after{clear:both}.list-unstyled[data-v-0f3ebcc0]{margin:0;padding:0;list-style-type:none}.no-select[data-v-0f3ebcc0]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-0f3ebcc0]{resize:none}.hand[data-v-0f3ebcc0]{cursor:pointer;cursor:hand}.fixed[data-v-0f3ebcc0]{table-layout:fixed}.clip[data-v-0f3ebcc0]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-0f3ebcc0],.force-wrap[data-v-0f3ebcc0]{word-wrap:break-word}.force-wrap[data-v-0f3ebcc0]{white-space:normal}.bordered-section[data-v-0f3ebcc0]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-0f3ebcc0]{margin-bottom:20px;margin-top:20px}.vpc[data-v-0f3ebcc0],.vpc-subnet[data-v-0f3ebcc0]{display:flex;line-height:30px}.vpc-subnet .vpc-name[data-v-0f3ebcc0],.vpc .vpc-name[data-v-0f3ebcc0]{font-weight:700;flex:1}.vpc-subnet .vpc-info[data-v-0f3ebcc0],.vpc .vpc-info[data-v-0f3ebcc0]{font-size:12px;opacity:.7}.vpc-subnet .vpc-name[data-v-0f3ebcc0]{font-weight:400;padding-left:15px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../vue-style-loader/index.js??ref--10-oneOf-1-0!../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./amazonec2.vue?vue&type=style&index=0&id=0f3ebcc0&prod&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.$fetchState.pending)?_c('Loading'):[(_vm.errors.length)?_c('div',_vm._l((_vm.errors),function(err,idx){return _c('div',{key:idx},[_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.stringify(err)}})],1)}),0):_vm._e(),(_vm.loadedRegionalFor)?_c('div',[_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.regionOptions,\"required\":true,\"searchable\":true,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.region')},model:{value:(_vm.value.region),callback:function ($$v) {_vm.$set(_vm.value, \"region\", $$v)},expression:\"value.region\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.zoneOptions,\"required\":true,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.zone')},model:{value:(_vm.value.zone),callback:function ($$v) {_vm.$set(_vm.value, \"zone\", $$v)},expression:\"value.zone\"}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-9\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.instanceOptions,\"required\":true,\"selectable\":function (option) { return !option.disabled; },\"searchable\":true,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.instanceType')},scopedSlots:_vm._u([{key:\"option\",fn:function(opt){return [(opt.kind === 'group')?[_c('b',[_vm._v(_vm._s(opt.label))])]:[_c('span',{staticClass:\"pl-10\"},[_vm._v(_vm._s(opt.label))])]]}}],null,false,397254338),model:{value:(_vm.value.instanceType),callback:function ($$v) {_vm.$set(_vm.value, \"instanceType\", $$v)},expression:\"value.instanceType\"}})],1),_c('div',{staticClass:\"col span-3\"},[_c('UnitInput',{attrs:{\"output-as\":\"string\",\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.rootSize.placeholder'),\"label\":_vm.t('cluster.machineConfig.amazonEc2.rootSize.label'),\"suffix\":_vm.t('cluster.machineConfig.amazonEc2.rootSize.suffix')},model:{value:(_vm.value.rootSize),callback:function ($$v) {_vm.$set(_vm.value, \"rootSize\", $$v)},expression:\"value.rootSize\"}})],1)]),_c('div',{staticClass:\"row mt-20 mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"value\":_vm.selectedNetwork,\"options\":_vm.networkOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.selectedNetwork.placeholder'),\"label\":_vm.t('cluster.machineConfig.amazonEc2.selectedNetwork.label'),\"option-key\":\"value\"},on:{\"input\":function($event){return _vm.updateNetwork($event)}},scopedSlots:_vm._u([{key:\"option\",fn:function(opt){return [_c('div',{class:{'vpc': opt.kind === 'vpc', 'vpc-subnet': opt.kind !== 'vpc'}},[_c('span',{staticClass:\"vpc-name\"},[_vm._v(_vm._s(opt.label))]),_c('span',{staticClass:\"vpc-info\"},[_vm._v(_vm._s(opt.subLabel))])])]}}],null,false,831602914)})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"required\":_vm.isIamInstanceProfileNameRequired,\"tooltip\":_vm.t('cluster.machineConfig.amazonEc2.iamInstanceProfile.tooltip'),\"label\":_vm.t('cluster.machineConfig.amazonEc2.iamInstanceProfile.label')},model:{value:(_vm.value.iamInstanceProfile),callback:function ($$v) {_vm.$set(_vm.value, \"iamInstanceProfile\", $$v)},expression:\"value.iamInstanceProfile\"}})],1)]),_c('portal',{attrs:{\"to\":'advanced-'+_vm.uuid}},[_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.ami.placeholder'),\"label\":_vm.t('cluster.machineConfig.amazonEc2.ami.label')},model:{value:(_vm.value.ami),callback:function ($$v) {_vm.$set(_vm.value, \"ami\", $$v)},expression:\"value.ami\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machineConfig.amazonEc2.sshUser.label'),\"disabled\":!_vm.value.ami || _vm.disabled,\"tooltip\":_vm.t('cluster.machineConfig.amazonEc2.sshUser.tooltip'),\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.sshUser.placeholder')},model:{value:(_vm.value.sshUser),callback:function ($$v) {_vm.$set(_vm.value, \"sshUser\", $$v)},expression:\"value.sshUser\"}})],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.machineConfig.amazonEc2.securityGroup.title'))+\" \"),(!_vm.value.vpcId)?_c('span',{staticClass:\"text-muted text-small\"},[_vm._v(\" \"+_vm._s(_vm.t('cluster.machineConfig.amazonEc2.securityGroup.vpcId'))+\" \")]):_vm._e()]),_c('RadioGroup',{attrs:{\"name\":\"securityGroupMode\",\"mode\":_vm.mode,\"disabled\":!_vm.value.vpcId || _vm.disabled,\"labels\":_vm.securityGroupLabels,\"options\":['default','custom']},model:{value:(_vm.securityGroupMode),callback:function ($$v) {_vm.securityGroupMode=$$v},expression:\"securityGroupMode\"}}),(_vm.value.vpcId && _vm.securityGroupMode === 'custom')?_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"disabled\":!_vm.value.vpcId || _vm.disabled,\"options\":_vm.securityGroupOptions,\"searchable\":true,\"multiple\":true,\"taggable\":true},model:{value:(_vm.value.securityGroup),callback:function ($$v) {_vm.$set(_vm.value, \"securityGroup\", $$v)},expression:\"value.securityGroup\"}}):_vm._e()],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.volumeType.label'),\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.volumeType.placeholder')},model:{value:(_vm.value.volumeType),callback:function ($$v) {_vm.$set(_vm.value, \"volumeType\", $$v)},expression:\"value.volumeType\"}})],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-12\"},[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machineConfig.amazonEc2.encryptEbsVolume')},model:{value:(_vm.value.encryptEbsVolume),callback:function ($$v) {_vm.$set(_vm.value, \"encryptEbsVolume\", $$v)},expression:\"value.encryptEbsVolume\"}}),(_vm.value.encryptEbsVolume)?_c('div',{staticClass:\"mt-10\"},[(_vm.canReadKms)?_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.kmsOptions,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.kmsKey.label')},model:{value:(_vm.value.kmsKey),callback:function ($$v) {_vm.$set(_vm.value, \"kmsKey\", $$v)},expression:\"value.kmsKey\"}}):[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.kmsKey.label')},model:{value:(_vm.value.kmsKey),callback:function ($$v) {_vm.$set(_vm.value, \"kmsKey\", $$v)},expression:\"value.kmsKey\"}}),_c('p',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(_vm.t('cluster.machineConfig.amazonEc2.kmsKey.text'))+\" \")])]],2):_vm._e()],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machineConfig.amazonEc2.requestSpotInstance')},model:{value:(_vm.value.requestSpotInstance),callback:function ($$v) {_vm.$set(_vm.value, \"requestSpotInstance\", $$v)},expression:\"value.requestSpotInstance\"}}),(_vm.value.requestSpotInstance)?_c('div',{staticClass:\"mt-10\"},[_c('UnitInput',{attrs:{\"output-as\":\"string\",\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"placeholder\":_vm.t('cluster.machineConfig.amazonEc2.spotPrice.placeholder'),\"label\":_vm.t('cluster.machineConfig.amazonEc2.spotPrice.label'),\"suffix\":_vm.t('cluster.machineConfig.amazonEc2.spotPrice.suffix')},model:{value:(_vm.value.spotPrice),callback:function ($$v) {_vm.$set(_vm.value, \"spotPrice\", $$v)},expression:\"value.spotPrice\"}})],1):_vm._e()],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-12\"},[_c('div',[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.privateAddressOnly')},model:{value:(_vm.value.privateAddressOnly),callback:function ($$v) {_vm.$set(_vm.value, \"privateAddressOnly\", $$v)},expression:\"value.privateAddressOnly\"}})],1),_c('div',[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.useEbsOptimizedInstance')},model:{value:(_vm.value.useEbsOptimizedInstance),callback:function ($$v) {_vm.$set(_vm.value, \"useEbsOptimizedInstance\", $$v)},expression:\"value.useEbsOptimizedInstance\"}})],1),_c('div',[_c('Checkbox',{attrs:{\"value-when-true\":\"enabled\",\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.httpEndpoint')},model:{value:(_vm.value.httpEndpoint),callback:function ($$v) {_vm.$set(_vm.value, \"httpEndpoint\", $$v)},expression:\"value.httpEndpoint\"}})],1),_c('div',[_c('Checkbox',{attrs:{\"value-when-true\":\"required\",\"mode\":_vm.mode,\"disabled\":!_vm.value.httpEndpoint || _vm.disabled,\"label\":_vm.t('cluster.machineConfig.amazonEc2.httpTokens')},model:{value:(_vm.value.httpTokens),callback:function ($$v) {_vm.$set(_vm.value, \"httpTokens\", $$v)},expression:\"value.httpTokens\"}})],1)])]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-12\"},[_c('KeyValue',{attrs:{\"value\":_vm.tags,\"mode\":_vm.mode,\"read-allowed\":false,\"label\":_vm.t('cluster.machineConfig.amazonEc2.tagTitle'),\"add-label\":_vm.t('labels.addTag'),\"disabled\":_vm.disabled},on:{\"input\":_vm.updateTags}})],1)])])],1):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { NORMAN } from '@shell/config/types';\nimport { allHash } from '@shell/utils/promise';\nimport { addObject, addObjects, findBy } from '@shell/utils/array';\nimport { sortBy } from '@shell/utils/sort';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\n\nconst DEFAULT_GROUP = 'rancher-nodes';\n\nexport default {\n  components: {\n    Banner, Loading, LabeledInput, LabeledSelect, Checkbox, RadioGroup, UnitInput, KeyValue\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    uuid: {\n      type:     String,\n      required: true,\n    },\n\n    cluster: {\n      type:    Object,\n      default: () => ({})\n    },\n\n    credentialId: {\n      type:     String,\n      required: true,\n    },\n\n    disabled: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  async fetch() {\n    this.errors = [];\n    if ( !this.credentialId ) {\n      return;\n    }\n\n    try {\n      if ( this.credential?.id !== this.credentialId ) {\n        this.credential = await this.$store.dispatch('rancher/find', { type: NORMAN.CLOUD_CREDENTIAL, id: this.credentialId });\n      }\n    } catch (e) {\n      this.credential = null;\n    }\n\n    try {\n      const region = this.value.region || this.credential?.decodedData.defaultRegion || this.$store.getters['aws/defaultRegion'];\n\n      if ( !this.value.region ) {\n        this.$set(this.value, 'region', region);\n      }\n\n      this.ec2Client = await this.$store.dispatch('aws/ec2', { region, cloudCredentialId: this.credentialId });\n      this.kmsClient = await this.$store.dispatch('aws/kms', { region, cloudCredentialId: this.credentialId });\n\n      if ( !this.instanceInfo ) {\n        this.instanceInfo = await this.$store.dispatch('aws/instanceInfo', { client: this.ec2Client } );\n      }\n\n      const hash = {};\n\n      if ( !this.regionInfo ) {\n        hash.regionInfo = this.ec2Client.describeRegions({});\n      }\n\n      if ( this.loadedRegionalFor !== region ) {\n        hash.zoneInfo = await this.ec2Client.describeAvailabilityZones({});\n        hash.vpcInfo = await this.ec2Client.describeVpcs({});\n        hash.subnetInfo = await this.ec2Client.describeSubnets({});\n        hash.securityGroupInfo = await this.ec2Client.describeSecurityGroups({});\n      }\n\n      const res = await allHash(hash);\n\n      for ( const k in res ) {\n        this[k] = res[k];\n      }\n\n      try {\n        this.kmsInfo = await this.kmsClient.listKeys({});\n        this.canReadKms = true;\n      } catch (e) {\n        this.canReadKms = false;\n      }\n\n      if ( !this.value.zone ) {\n        this.$set(this.value, 'zone', 'a');\n      }\n\n      if ( !this.value.instanceType ) {\n        this.$set(this.value, 'instanceType', this.$store.getters['aws/defaultInstanceType']);\n      }\n\n      this.initNetwork();\n      this.initTags();\n\n      if ( !this.value.securityGroup?.length ) {\n        this.$set(this.value, 'securityGroup', [DEFAULT_GROUP]);\n      }\n\n      if ( this.value.securityGroup?.length === 1 && this.value.securityGroup[0] === DEFAULT_GROUP ) {\n        this.securityGroupMode = 'default';\n      } else {\n        this.securityGroupMode = 'custom';\n      }\n\n      this.loadedRegionalFor = region;\n    } catch (e) {\n      this.errors = exceptionToErrorsArray(e);\n    }\n  },\n\n  data() {\n    return {\n      ec2Client:         null,\n      kmsClient:         null,\n      credential:        null,\n      instanceInfo:      null,\n      regionInfo:        null,\n      canReadKms:        null,\n      kmsInfo:           null,\n      tags:              null,\n      loadedRegionalFor: null,\n      zoneInfo:          null,\n      vpcInfo:           null,\n      subnetInfo:        null,\n      securityGroupInfo: null,\n      selectedNetwork:   null,\n      securityGroupMode: null,\n    };\n  },\n\n  computed: {\n    securityGroupLabels() {\n      return [\n        this.t('cluster.machineConfig.amazonEc2.securityGroup.mode.default', { defaultGroup: DEFAULT_GROUP }),\n        this.t('cluster.machineConfig.amazonEc2.securityGroup.mode.custom')\n      ];\n    },\n\n    isIamInstanceProfileNameRequired() {\n      return this.cluster?.cloudProvider === 'aws';\n    },\n\n    instanceOptions() {\n      let lastGroup;\n\n      const out = [];\n\n      for ( const row of this.instanceInfo ) {\n        if ( row.groupLabel !== lastGroup ) {\n          out.push({\n            kind:     'group',\n            disabled: true,\n            label:    row.groupLabel\n          });\n\n          lastGroup = row.groupLabel;\n        }\n\n        out.push({\n          label: row['label'],\n          value: row['apiName'],\n        });\n      }\n\n      return out;\n    },\n\n    regionOptions() {\n      if ( !this.regionInfo ) {\n        return [];\n      }\n\n      return this.regionInfo.Regions.map((obj) => {\n        return obj.RegionName;\n      }).sort();\n    },\n\n    zoneOptions() {\n      if ( !this.zoneInfo ) {\n        return [];\n      }\n\n      return this.zoneInfo.AvailabilityZones.map((obj) => {\n        return obj.ZoneName.substr(-1);\n      }).sort();\n    },\n\n    networkOptions() {\n      if ( !this.vpcInfo || !this.subnetInfo ) {\n        return [];\n      }\n\n      let vpcs = [];\n      const subnetsByVpc = {};\n\n      for ( const obj of this.vpcInfo.Vpcs ) {\n        const name = obj.Tags && obj.Tags?.length ? obj.Tags.find(t => t.Key === 'Name')?.Value : null;\n\n        vpcs.push({\n          label:     name || obj.VpcId,\n          subLabel:  name ? obj.VpcId : obj.CidrBlock,\n          isDefault: obj.IsDefault || false,\n          kind:      'vpc',\n          value:     obj.VpcId,\n        });\n      }\n\n      vpcs = sortBy(vpcs, ['isDefault:desc', 'label']);\n\n      for ( const obj of this.subnetInfo.Subnets ) {\n        if ( obj.AvailabilityZone !== `${ this.value.region }${ this.value.zone }` ) {\n          continue;\n        }\n\n        let entry = subnetsByVpc[obj.VpcId];\n\n        if ( !entry ) {\n          entry = [];\n          subnetsByVpc[obj.VpcId] = entry;\n        }\n\n        const name = obj.Tags && obj.Tags?.length ? obj.Tags.find(t => t.Key === 'Name')?.Value : null;\n\n        entry.push({\n          label:     name || obj.SubnetId,\n          subLabel:  name ? obj.SubnetId : obj.CidrBlock,\n          kind:      'subnet',\n          isDefault: obj.DefaultForAz || false,\n          value:     obj.SubnetId,\n          vpcId:     obj.VpcId,\n        });\n      }\n\n      const out = [];\n\n      for ( const obj of vpcs ) {\n        addObject(out, obj);\n\n        if ( subnetsByVpc[obj.value] ) {\n          addObjects(out, sortBy(subnetsByVpc[obj.value], ['isDefault:desc', 'label']));\n        }\n      }\n\n      return out;\n    },\n\n    securityGroupOptions() {\n      if ( !this.securityGroupInfo ) {\n        return [];\n      }\n\n      const out = this.securityGroupInfo.SecurityGroups.filter((obj) => {\n        return obj.VpcId === this.value.vpcId;\n      }).map((obj) => {\n        return {\n          label:       obj.GroupName,\n          description: obj.GroupDescription,\n          value:       obj.GroupName\n        };\n      });\n\n      return sortBy(out, 'label');\n    },\n\n    kmsOptions() {\n      if ( !this.kmsInfo ) {\n        return [];\n      }\n\n      const out = this.kmsInfo.Keys.map((obj) => {\n        return obj.KeyArn;\n      }).sort();\n\n      return out;\n    },\n\n    DEFAULT_GROUP() {\n      return DEFAULT_GROUP;\n    }\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n\n    'value.region'() {\n      this.$fetch();\n    },\n\n    'value.zone'() {\n      this.$fetch();\n    },\n\n    'securityGroupMode'(val) {\n      this.value.securityGroupReadonly = ( val !== 'default' );\n    },\n  },\n\n  methods: {\n    stringify,\n\n    initNetwork() {\n      const id = this.value.subnetId || this.value.vpcId;\n\n      this.selectedNetwork = id;\n    },\n\n    updateNetwork(value) {\n      let obj;\n\n      if ( value ) {\n        obj = findBy(this.networkOptions, 'value', value);\n      }\n\n      if ( obj?.kind === 'subnet' ) {\n        this.value.subnetId = value;\n        this.value.vpcId = obj.vpcId;\n        this.selectedNetwork = value;\n      } else if ( obj ) {\n        this.value.subnetId = null;\n        this.value.vpcId = value;\n        this.selectedNetwork = value;\n      } else {\n        this.value.subnetId = null;\n        this.value.vpcId = null;\n        this.selectedNetwork = null;\n      }\n    },\n\n    initTags() {\n      const parts = (this.value.tags || '').split(/,/);\n      const out = {};\n\n      let i = 0;\n\n      while ( i + 1 < parts.length ) {\n        const key = `${ parts[i] }`.trim();\n        const value = `${ parts[i + 1] }`.trim();\n\n        if ( key ) {\n          out[key] = value;\n        }\n\n        i += 2;\n      }\n\n      this.tags = out;\n    },\n\n    updateTags(tags) {\n      const ary = [];\n\n      for ( const k in tags ) {\n        ary.push(k, tags[k]);\n      }\n\n      this.$set(this.value, 'tags', ary.join(','));\n    },\n\n    test() {\n      const errors = [];\n\n      if (!this.selectedNetwork) {\n        errors.push(this.t('validation.required', { key: 'VPC/Subnet' }, true));\n      }\n\n      return { errors };\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <Loading v-if=\"$fetchState.pending\" />\n    <template v-else>\n      <div v-if=\"errors.length\">\n        <div\n          v-for=\"(err, idx) in errors\"\n          :key=\"idx\"\n        >\n          <Banner\n            color=\"error\"\n            :label=\"stringify(err)\"\n          />\n        </div>\n      </div>\n\n      <div v-if=\"loadedRegionalFor\">\n        <div class=\"row mb-20\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"value.region\"\n              :mode=\"mode\"\n              :options=\"regionOptions\"\n              :required=\"true\"\n              :searchable=\"true\"\n              :disabled=\"disabled\"\n              :label=\"t('cluster.machineConfig.amazonEc2.region')\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"value.zone\"\n              :mode=\"mode\"\n              :options=\"zoneOptions\"\n              :required=\"true\"\n              :disabled=\"disabled\"\n              :label=\"t('cluster.machineConfig.amazonEc2.zone')\"\n            />\n          </div>\n        </div>\n        <div class=\"row mb-20\">\n          <div class=\"col span-9\">\n            <LabeledSelect\n              v-model=\"value.instanceType\"\n              :mode=\"mode\"\n              :options=\"instanceOptions\"\n              :required=\"true\"\n              :selectable=\"option => !option.disabled\"\n              :searchable=\"true\"\n              :disabled=\"disabled\"\n              :label=\"t('cluster.machineConfig.amazonEc2.instanceType')\"\n            >\n              <template v-slot:option=\"opt\">\n                <template v-if=\"opt.kind === 'group'\">\n                  <b>{{ opt.label }}</b>\n                </template>\n                <template v-else>\n                  <span class=\"pl-10\">{{ opt.label }}</span>\n                </template>\n              </template>\n            </LabeledSelect>\n          </div>\n          <div class=\"col span-3\">\n            <UnitInput\n              v-model=\"value.rootSize\"\n              output-as=\"string\"\n              :mode=\"mode\"\n              :disabled=\"disabled\"\n              :placeholder=\"t('cluster.machineConfig.amazonEc2.rootSize.placeholder')\"\n              :label=\"t('cluster.machineConfig.amazonEc2.rootSize.label')\"\n              :suffix=\"t('cluster.machineConfig.amazonEc2.rootSize.suffix')\"\n            />\n          </div>\n        </div>\n        <div class=\"row mt-20 mb-20\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              :mode=\"mode\"\n              :value=\"selectedNetwork\"\n              :options=\"networkOptions\"\n              :searchable=\"true\"\n              :required=\"true\"\n              :disabled=\"disabled\"\n              :placeholder=\"t('cluster.machineConfig.amazonEc2.selectedNetwork.placeholder')\"\n              :label=\"t('cluster.machineConfig.amazonEc2.selectedNetwork.label')\"\n              option-key=\"value\"\n              @input=\"updateNetwork($event)\"\n            >\n              <template v-slot:option=\"opt\">\n                <div :class=\"{'vpc': opt.kind === 'vpc', 'vpc-subnet': opt.kind !== 'vpc'}\">\n                  <span class=\"vpc-name\">{{ opt.label }}</span><span class=\"vpc-info\">{{ opt.subLabel }}</span>\n                </div>\n              </template>\n            </LabeledSelect>\n          </div>\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.iamInstanceProfile\"\n              :mode=\"mode\"\n              :disabled=\"disabled\"\n              :required=\"isIamInstanceProfileNameRequired\"\n              :tooltip=\"t('cluster.machineConfig.amazonEc2.iamInstanceProfile.tooltip')\"\n              :label=\"t('cluster.machineConfig.amazonEc2.iamInstanceProfile.label')\"\n            />\n          </div>\n        </div>\n\n        <portal :to=\"'advanced-'+uuid\">\n          <div class=\"row mt-20\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"value.ami\"\n                :mode=\"mode\"\n                :disabled=\"disabled\"\n                :placeholder=\"t('cluster.machineConfig.amazonEc2.ami.placeholder')\"\n                :label=\"t('cluster.machineConfig.amazonEc2.ami.label')\"\n              />\n            </div>\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"value.sshUser\"\n                :mode=\"mode\"\n                :label=\"t('cluster.machineConfig.amazonEc2.sshUser.label')\"\n                :disabled=\"!value.ami || disabled\"\n                :tooltip=\"t('cluster.machineConfig.amazonEc2.sshUser.tooltip')\"\n                :placeholder=\"t('cluster.machineConfig.amazonEc2.sshUser.placeholder')\"\n              />\n            </div>\n          </div>\n\n          <div class=\"row mt-20\">\n            <div class=\"col span-12\">\n              <h3>\n                {{ t('cluster.machineConfig.amazonEc2.securityGroup.title') }}\n                <span\n                  v-if=\"!value.vpcId\"\n                  class=\"text-muted text-small\"\n                >\n                  {{ t('cluster.machineConfig.amazonEc2.securityGroup.vpcId') }}\n                </span>\n              </h3>\n              <RadioGroup\n                v-model=\"securityGroupMode\"\n                name=\"securityGroupMode\"\n                :mode=\"mode\"\n                :disabled=\"!value.vpcId || disabled\"\n                :labels=\"securityGroupLabels\"\n                :options=\"['default','custom']\"\n              />\n              <LabeledSelect\n                v-if=\"value.vpcId && securityGroupMode === 'custom'\"\n                v-model=\"value.securityGroup\"\n                :mode=\"mode\"\n                :disabled=\"!value.vpcId || disabled\"\n                :options=\"securityGroupOptions\"\n                :searchable=\"true\"\n                :multiple=\"true\"\n                :taggable=\"true\"\n              />\n            </div>\n          </div>\n\n          <div class=\"row mt-20\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"value.volumeType\"\n                :mode=\"mode\"\n                :disabled=\"disabled\"\n                :label=\"t('cluster.machineConfig.amazonEc2.volumeType.label')\"\n                :placeholder=\"t('cluster.machineConfig.amazonEc2.volumeType.placeholder')\"\n              />\n            </div>\n          </div>\n\n          <div class=\"row mt-20\">\n            <div class=\"col span-12\">\n              <Checkbox\n                v-model=\"value.encryptEbsVolume\"\n                :mode=\"mode\"\n                :label=\"t('cluster.machineConfig.amazonEc2.encryptEbsVolume')\"\n              />\n              <div\n                v-if=\"value.encryptEbsVolume\"\n                class=\"mt-10\"\n              >\n                <LabeledSelect\n                  v-if=\"canReadKms\"\n                  v-model=\"value.kmsKey\"\n                  :mode=\"mode\"\n                  :options=\"kmsOptions\"\n                  :disabled=\"disabled\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.kmsKey.label')\"\n                />\n                <template v-else>\n                  <LabeledInput\n                    v-model=\"value.kmsKey\"\n                    :mode=\"mode\"\n                    :disabled=\"disabled\"\n                    :label=\"t('cluster.machineConfig.amazonEc2.kmsKey.label')\"\n                  />\n                  <p class=\"text-muted\">\n                    {{ t('cluster.machineConfig.amazonEc2.kmsKey.text') }}\n                  </p>\n                </template>\n              </div>\n            </div>\n          </div>\n          <div class=\"row mt-20\">\n            <div class=\"col span-6\">\n              <Checkbox\n                v-model=\"value.requestSpotInstance\"\n                :mode=\"mode\"\n                :label=\"t('cluster.machineConfig.amazonEc2.requestSpotInstance')\"\n              />\n              <div\n                v-if=\"value.requestSpotInstance\"\n                class=\"mt-10\"\n              >\n                <UnitInput\n                  v-model=\"value.spotPrice\"\n                  output-as=\"string\"\n                  :mode=\"mode\"\n                  :disabled=\"disabled\"\n                  :placeholder=\"t('cluster.machineConfig.amazonEc2.spotPrice.placeholder')\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.spotPrice.label')\"\n                  :suffix=\"t('cluster.machineConfig.amazonEc2.spotPrice.suffix')\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row mt-20\">\n            <div class=\"col span-12\">\n              <div>\n                <Checkbox\n                  v-model=\"value.privateAddressOnly\"\n                  :mode=\"mode\"\n                  :disabled=\"disabled\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.privateAddressOnly')\"\n                />\n              </div>\n              <div>\n                <Checkbox\n                  v-model=\"value.useEbsOptimizedInstance\"\n                  :mode=\"mode\"\n                  :disabled=\"disabled\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.useEbsOptimizedInstance')\"\n                />\n              </div>\n              <div>\n                <Checkbox\n                  v-model=\"value.httpEndpoint\"\n                  value-when-true=\"enabled\"\n                  :mode=\"mode\"\n                  :disabled=\"disabled\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.httpEndpoint')\"\n                />\n              </div>\n              <div>\n                <Checkbox\n                  v-model=\"value.httpTokens\"\n                  value-when-true=\"required\"\n                  :mode=\"mode\"\n                  :disabled=\"!value.httpEndpoint || disabled\"\n                  :label=\"t('cluster.machineConfig.amazonEc2.httpTokens')\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row mt-20\">\n            <div class=\"col span-12\">\n              <KeyValue\n                :value=\"tags\"\n                :mode=\"mode\"\n                :read-allowed=\"false\"\n                :label=\"t('cluster.machineConfig.amazonEc2.tagTitle')\"\n                :add-label=\"t('labels.addTag')\"\n                :disabled=\"disabled\"\n                @input=\"updateTags\"\n              />\n            </div>\n          </div>\n        </portal>\n      </div>\n    </template>\n  </div>\n</template>\n<style scoped lang=\"scss\">\n  .vpc, .vpc-subnet {\n    display: flex;\n    line-height: 30px;\n\n    .vpc-name {\n      font-weight: bold;\n      flex: 1;\n    }\n\n    .vpc-info {\n      font-size: 12px;\n      opacity: 0.7;\n    }\n  }\n\n  .vpc-subnet .vpc-name {\n    font-weight: normal;\n    padding-left: 15px;\n  }\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./amazonec2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./amazonec2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./amazonec2.vue?vue&type=template&id=0f3ebcc0&scoped=true&\"\nimport script from \"./amazonec2.vue?vue&type=script&lang=js&\"\nexport * from \"./amazonec2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./amazonec2.vue?vue&type=style&index=0&id=0f3ebcc0&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f3ebcc0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}