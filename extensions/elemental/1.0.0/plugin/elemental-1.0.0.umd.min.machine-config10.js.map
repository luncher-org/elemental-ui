{"version":3,"sources":["webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/linode.vue?3182","webpack://elemental-1.0.0/../../node_modules/@rancher/shell/machine-config/linode.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/linode.vue?582b","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/linode.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$fetchState","attrs","errors","_l","err","idx","key","stringify","staticClass","mode","regionOptions","disabled","model","value","callback","$$v","$set","expression","instanceOptions","imageOptions","_v","staticRenderFns","components","Loading","Banner","LabeledSelect","Checkbox","mixins","props","credentialId","type","required","default","id","defaultRegion","defaultInstanceType","defaultImage","data","credential","watch","computed","isCreate","methods","updateInterfaces","component"],"mappings":"oMAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIM,YAAmB,QAAEF,EAAG,UAAU,CAACG,MAAM,CAAC,SAAU,KAASP,EAAIQ,OAAa,OAAEJ,EAAG,MAAMJ,EAAIS,GAAIT,EAAU,QAAE,SAASU,EAAIC,GAAK,OAAOP,EAAG,MAAM,CAACQ,IAAID,GAAK,CAACP,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,QAAQ,MAAQP,EAAIa,UAAUH,OAAS,MAAK,GAAGN,EAAG,MAAM,CAACA,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,MAAM,CAACU,YAAY,cAAc,CAACV,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAOP,EAAIe,KAAK,QAAUf,EAAIgB,cAAc,YAAa,EAAK,UAAW,EAAK,SAAWhB,EAAIiB,SAAS,MAAQ,UAAUC,MAAM,CAACC,MAAOnB,EAAImB,MAAY,OAAEC,SAAS,SAAUC,GAAMrB,EAAIsB,KAAKtB,EAAImB,MAAO,SAAUE,IAAME,WAAW,mBAAmB,GAAGnB,EAAG,MAAM,CAACU,YAAY,cAAc,CAACV,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAOP,EAAIe,KAAK,QAAUf,EAAIwB,gBAAgB,YAAa,EAAK,UAAW,EAAK,SAAWxB,EAAIiB,SAAS,MAAQ,QAAQC,MAAM,CAACC,MAAOnB,EAAImB,MAAkB,aAAEC,SAAS,SAAUC,GAAMrB,EAAIsB,KAAKtB,EAAImB,MAAO,eAAgBE,IAAME,WAAW,yBAAyB,KAAKnB,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,MAAM,CAACU,YAAY,cAAc,CAACV,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAOP,EAAIe,KAAK,QAAUf,EAAIyB,aAAa,YAAa,EAAK,UAAW,EAAK,SAAWzB,EAAIiB,SAAS,MAAQ,YAAYC,MAAM,CAACC,MAAOnB,EAAImB,MAAW,MAAEC,SAAS,SAAUC,GAAMrB,EAAIsB,KAAKtB,EAAImB,MAAO,QAASE,IAAME,WAAW,kBAAkB,GAAGnB,EAAG,MAAM,CAACU,YAAY,mBAAmB,CAACV,EAAG,KAAK,CAACJ,EAAI0B,GAAG,+BAA+BtB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAIe,KAAK,SAAWf,EAAIiB,SAAS,MAAQ,sBAAsBC,MAAM,CAACC,MAAOnB,EAAImB,MAAqB,gBAAEC,SAAS,SAAUC,GAAMrB,EAAIsB,KAAKtB,EAAImB,MAAO,kBAAmBE,IAAME,WAAW,4BAA4B,QACvpDI,EAAkB,G,gGCSP,GACfC,YACAC,eAAAC,cAAAC,qBAAAC,iBAGAC,gBAEAC,OACAC,cACAC,YACAC,aAEApB,UACAmB,aACAE,aAIA,cACA,eAEA,IACA,oBACA,2DACAF,6BACAG,wBAGA,SACA,qBAGA,UACA,sEAAAJ,iCAEA,gBAEA,kDACAK,8DAGA,8FAEA,oBACA,qBAGA,0EAAAL,iCAEA,sBAEA,oDACAM,oFAEA,IACAA,iCAIA,0BACA,2BAGA,oEAAAN,iCAEA,2BAEA,yCACAO,8BAGA,mBACA,oBAGA,wBACA,SACA,gCAIAC,OACA,OACAC,gBACA5B,mBACAQ,qBACAC,oBAIAoB,OACA,eACA,gBAIAC,UACAC,WACA,4BAIAC,SACAnC,iBAEAoC,mBACA,wBACA,6BCrH4T,I,YCOxTC,EAAY,eACd,EACAnD,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAuB,E","file":"elemental-1.0.0.umd.min.machine-config10.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading',{attrs:{\"delayed\":true}}):(_vm.errors.length)?_c('div',_vm._l((_vm.errors),function(err,idx){return _c('div',{key:idx},[_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.stringify(err)}})],1)}),0):_c('div',[_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.regionOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"Region\"},model:{value:(_vm.value.region),callback:function ($$v) {_vm.$set(_vm.value, \"region\", $$v)},expression:\"value.region\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.instanceOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"Type\"},model:{value:(_vm.value.instanceType),callback:function ($$v) {_vm.$set(_vm.value, \"instanceType\", $$v)},expression:\"value.instanceType\"}})],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.imageOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"OS Image\"},model:{value:(_vm.value.image),callback:function ($$v) {_vm.$set(_vm.value, \"image\", $$v)},expression:\"value.image\"}})],1),_c('div',{staticClass:\"col span-6 pt-5\"},[_c('h3',[_vm._v(\"Additional Linode Options\")]),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":\"Private Networking\"},model:{value:(_vm.value.createPrivateIp),callback:function ($$v) {_vm.$set(_vm.value, \"createPrivateIp\", $$v)},expression:\"value.createPrivateIp\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { NORMAN } from '@shell/config/types';\nimport { exceptionToErrorsArray, stringify } from '@shell/utils/error';\nimport { _CREATE } from '@shell/config/query-params';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Checkbox } from '@components/Form/Checkbox';\n\nexport default {\n  components: {\n    Loading, Banner, LabeledSelect, Checkbox\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    credentialId: {\n      type:     String,\n      required: true\n    },\n    disabled: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  async fetch() {\n    this.errors = [];\n\n    try {\n      if ( this.credentialId ) {\n        this.credential = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.CLOUD_CREDENTIAL,\n          id:   this.credentialId\n        });\n      }\n    } catch (e) {\n      this.credential = null;\n    }\n\n    try {\n      this.regionOptions = await this.$store.dispatch('linode/regionOptions', { credentialId: this.credentialId });\n\n      let defaultRegion = 'us-west';\n\n      if ( !this.regionOptions.find(x => x.value === defaultRegion) ) {\n        defaultRegion = this.regionOptions[0]?.value;\n      }\n\n      const region = this.value.region || this.credential?.defaultRegion || defaultRegion;\n\n      if ( !this.value.region ) {\n        this.value.region = region;\n      }\n\n      this.instanceOptions = await this.$store.dispatch('linode/instanceOptions', { credentialId: this.credentialId });\n\n      let defaultInstanceType = 'g6-standard-2';\n\n      if ( !this.instanceOptions.find(x => x.value === defaultInstanceType) ) {\n        defaultInstanceType = this.instanceOptions.find(x => x.memoryGb >= 4)?.value;\n\n        if ( !defaultInstanceType ) {\n          defaultInstanceType = this.instanceOptions[0].value;\n        }\n      }\n\n      if ( !this.value.instanceType ) {\n        this.value.instanceType = defaultInstanceType;\n      }\n\n      this.imageOptions = await this.$store.dispatch('linode/imageOptions', { credentialId: this.credentialId });\n\n      let defaultImage = 'linode/ubuntu20.04';\n\n      if ( !this.imageOptions.find(x => x.value === defaultImage) ) {\n        defaultImage = this.imageOptions[0].value;\n      }\n\n      if ( !this.value.image ) {\n        this.value.image = defaultImage;\n      }\n\n      this.updateInterfaces();\n    } catch (e) {\n      this.errors = exceptionToErrorsArray(e);\n    }\n  },\n\n  data() {\n    return {\n      credential:      null,\n      regionOptions:   null,\n      instanceOptions: null,\n      imageOptions:    null\n    };\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n  },\n\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n\n  methods: {\n    stringify,\n\n    updateInterfaces() {\n      if ( !this.value.interfaces ) {\n        this.value.interfaces = [];\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    :delayed=\"true\"\n  />\n  <div v-else-if=\"errors.length\">\n    <div\n      v-for=\"(err, idx) in errors\"\n      :key=\"idx\"\n    >\n      <Banner\n        color=\"error\"\n        :label=\"stringify(err)\"\n      />\n    </div>\n  </div>\n  <div v-else>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.region\"\n          :mode=\"mode\"\n          :options=\"regionOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"Region\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.instanceType\"\n          :mode=\"mode\"\n          :options=\"instanceOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"Type\"\n        />\n      </div>\n    </div>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.image\"\n          :mode=\"mode\"\n          :options=\"imageOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"OS Image\"\n        />\n      </div>\n      <div class=\"col span-6 pt-5\">\n        <h3>Additional Linode Options</h3>\n        <Checkbox\n          v-model=\"value.createPrivateIp\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          label=\"Private Networking\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./linode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./linode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./linode.vue?vue&type=template&id=48f366f4&\"\nimport script from \"./linode.vue?vue&type=script&lang=js&\"\nexport * from \"./linode.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}