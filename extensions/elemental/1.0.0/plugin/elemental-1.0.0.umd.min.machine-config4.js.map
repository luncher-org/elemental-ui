{"version":3,"sources":["webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/digitalocean.vue?cec1","webpack://elemental-1.0.0/../../node_modules/@rancher/shell/machine-config/digitalocean.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/digitalocean.vue?9d79","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/machine-config/digitalocean.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$fetchState","attrs","errors","_l","err","idx","key","stringify","staticClass","mode","regionOptions","disabled","model","value","callback","$$v","$set","expression","instanceOptions","imageOptions","_v","t","isCreate","on","updateTags","tags","staticRenderFns","components","Loading","LabeledSelect","ArrayList","Checkbox","Banner","mixins","props","credentialId","type","required","default","id","defaultRegion","region","defaultSize","defaultImage","data","credential","watch","computed","methods","updateUsername","component"],"mappings":"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","file":"elemental-1.0.0.umd.min.machine-config4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading',{attrs:{\"delayed\":true}}):(_vm.errors.length)?_c('div',_vm._l((_vm.errors),function(err,idx){return _c('div',{key:idx},[_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.stringify(err)}})],1)}),0):_c('div',[_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.regionOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"Region\"},model:{value:(_vm.value.region),callback:function ($$v) {_vm.$set(_vm.value, \"region\", $$v)},expression:\"value.region\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.instanceOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"Size\"},model:{value:(_vm.value.size),callback:function ($$v) {_vm.$set(_vm.value, \"size\", $$v)},expression:\"value.size\"}})],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.imageOptions,\"searchable\":true,\"required\":true,\"disabled\":_vm.disabled,\"label\":\"OS Image\"},model:{value:(_vm.value.image),callback:function ($$v) {_vm.$set(_vm.value, \"image\", $$v)},expression:\"value.image\"}})],1),_c('div',{staticClass:\"col span-6 pt-5\"},[_c('h3',[_vm._v(\"Additional DigitalOcean Options\")]),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":\"Monitoring\"},model:{value:(_vm.value.monitoring),callback:function ($$v) {_vm.$set(_vm.value, \"monitoring\", $$v)},expression:\"value.monitoring\"}}),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":\"IPv6\"},model:{value:(_vm.value.ipv6),callback:function ($$v) {_vm.$set(_vm.value, \"ipv6\", $$v)},expression:\"value.ipv6\"}}),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.disabled,\"label\":\"Private Networking\"},model:{value:(_vm.value.privateNetworking),callback:function ($$v) {_vm.$set(_vm.value, \"privateNetworking\", $$v)},expression:\"value.privateNetworking\"}})],1)]),_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('ArrayList',{attrs:{\"mode\":_vm.mode,\"protip\":false,\"title\":_vm.t('cluster.machineConfig.digitalocean.tags.label'),\"value-placeholder\":_vm.t('cluster.machineConfig.digitalocean.tags.placeholder'),\"disabled\":!_vm.isCreate,\"add-allowed\":_vm.isCreate,\"remove-allowed\":_vm.isCreate},on:{\"input\":_vm.updateTags},model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { NORMAN } from '@shell/config/types';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\nimport { _CREATE } from '@shell/config/query-params';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: {\n    Loading, LabeledSelect, ArrayList, Checkbox, Banner\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    credentialId: {\n      type:     String,\n      required: true,\n    },\n\n    disabled: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  async fetch() {\n    this.errors = [];\n\n    try {\n      if ( this.credentialId ) {\n        this.credential = await this.$store.dispatch('rancher/find', { type: NORMAN.CLOUD_CREDENTIAL, id: this.credentialId });\n      }\n    } catch (e) {\n      this.credential = null;\n    }\n\n    try {\n      this.regionOptions = await this.$store.dispatch('digitalocean/regionOptions', { credentialId: this.credentialId });\n\n      let defaultRegion = 'sfo3';\n\n      if ( !this.regionOptions.find(x => x.value === defaultRegion) ) {\n        defaultRegion = this.regionOptions[0]?.value;\n      }\n\n      const region = this.value.region || this.credential?.defaultRegion || defaultRegion;\n\n      if ( !this.value.region ) {\n        this.value.region = region;\n      }\n\n      this.instanceOptions = await this.$store.dispatch('digitalocean/instanceOptions', { credentialId: this.credentialId, region });\n\n      let defaultSize = 's-2vcpu-4gb';\n\n      if ( !this.instanceOptions.find(x => x.value === defaultSize) ) {\n        defaultSize = this.instanceOptions.find(x => x.memoryGb >= 4)?.value;\n\n        if ( !defaultSize ) {\n          defaultSize = this.instanceOptions[0].value;\n        }\n      }\n\n      if ( !this.value.size ) {\n        this.value.size = defaultSize;\n      }\n\n      this.imageOptions = await this.$store.dispatch('digitalocean/imageOptions', { credentialId: this.credentialId, region });\n\n      let defaultImage = 'ubuntu-20-04-x64';\n\n      if ( !this.imageOptions.find(x => x.value === defaultImage) ) {\n        defaultImage = this.imageOptions[0].value;\n      }\n\n      if ( !this.value.image ) {\n        this.value.image = defaultImage;\n      }\n\n      this.updateUsername();\n    } catch (e) {\n      this.errors = exceptionToErrorsArray(e);\n    }\n  },\n\n  data() {\n    let tags = null;\n\n    if (this.value.tags) {\n      tags = this.value.tags.split(',');\n    }\n\n    return {\n      credential:      null,\n      regionOptions:   null,\n      imageOptions:    null,\n      instanceOptions: null,\n      tags\n    };\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n\n    'value.image': 'updateUsername',\n  },\n\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n\n  methods: {\n    stringify,\n\n    updateUsername() {\n      if ( this.value.image.match(/rancheros/i) ) {\n        this.value.sshUser = 'rancher';\n      } else {\n        this.value.sshUser = undefined;\n      }\n    },\n\n    updateTags() {\n      this.$set(this.value, 'tags', this.tags.join());\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    :delayed=\"true\"\n  />\n  <div v-else-if=\"errors.length\">\n    <div\n      v-for=\"(err, idx) in errors\"\n      :key=\"idx\"\n    >\n      <Banner\n        color=\"error\"\n        :label=\"stringify(err)\"\n      />\n    </div>\n  </div>\n  <div v-else>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.region\"\n          :mode=\"mode\"\n          :options=\"regionOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"Region\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.size\"\n          :mode=\"mode\"\n          :options=\"instanceOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"Size\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.image\"\n          :mode=\"mode\"\n          :options=\"imageOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          label=\"OS Image\"\n        />\n      </div>\n      <div class=\"col span-6 pt-5\">\n        <h3>Additional DigitalOcean Options</h3>\n        <Checkbox\n          v-model=\"value.monitoring\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          label=\"Monitoring\"\n        />\n        <Checkbox\n          v-model=\"value.ipv6\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          label=\"IPv6\"\n        />\n        <Checkbox\n          v-model=\"value.privateNetworking\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          label=\"Private Networking\"\n        />\n      </div>\n    </div>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <ArrayList\n          v-model=\"tags\"\n          :mode=\"mode\"\n          :protip=\"false\"\n          :title=\"t('cluster.machineConfig.digitalocean.tags.label')\"\n          :value-placeholder=\"t('cluster.machineConfig.digitalocean.tags.placeholder')\"\n          :disabled=\"!isCreate\"\n          :add-allowed=\"isCreate\"\n          :remove-allowed=\"isCreate\"\n          @input=\"updateTags\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./digitalocean.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--14-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--2-0!../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./digitalocean.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./digitalocean.vue?vue&type=template&id=654ef8d0&\"\nimport script from \"./digitalocean.vue?vue&type=script&lang=js&\"\nexport * from \"./digitalocean.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}