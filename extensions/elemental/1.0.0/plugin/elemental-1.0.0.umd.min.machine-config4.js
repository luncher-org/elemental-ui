(("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]||[]).push([[3],{4454:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.$fetchState.pending?a("Loading",{attrs:{delayed:!0}}):e.errors.length?a("div",e._l(e.errors,(function(i,t){return a("div",{key:t},[a("Banner",{attrs:{color:"error",label:e.stringify(i)}})],1)})),0):a("div",[a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{mode:e.mode,options:e.regionOptions,searchable:!0,required:!0,disabled:e.disabled,label:"Region"},model:{value:e.value.region,callback:function(i){e.$set(e.value,"region",i)},expression:"value.region"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{mode:e.mode,options:e.instanceOptions,searchable:!0,required:!0,disabled:e.disabled,label:"Size"},model:{value:e.value.size,callback:function(i){e.$set(e.value,"size",i)},expression:"value.size"}})],1)]),a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{mode:e.mode,options:e.imageOptions,searchable:!0,required:!0,disabled:e.disabled,label:"OS Image"},model:{value:e.value.image,callback:function(i){e.$set(e.value,"image",i)},expression:"value.image"}})],1),a("div",{staticClass:"col span-6 pt-5"},[a("h3",[e._v("Additional DigitalOcean Options")]),a("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:"Monitoring"},model:{value:e.value.monitoring,callback:function(i){e.$set(e.value,"monitoring",i)},expression:"value.monitoring"}}),a("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:"IPv6"},model:{value:e.value.ipv6,callback:function(i){e.$set(e.value,"ipv6",i)},expression:"value.ipv6"}}),a("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:"Private Networking"},model:{value:e.value.privateNetworking,callback:function(i){e.$set(e.value,"privateNetworking",i)},expression:"value.privateNetworking"}})],1)]),a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col span-6"},[a("ArrayList",{attrs:{mode:e.mode,protip:!1,title:e.t("cluster.machineConfig.digitalocean.tags.label"),"value-placeholder":e.t("cluster.machineConfig.digitalocean.tags.placeholder"),disabled:!e.isCreate,"add-allowed":e.isCreate,"remove-allowed":e.isCreate},on:{input:e.updateTags},model:{value:e.tags,callback:function(i){e.tags=i},expression:"tags"}})],1)])])},s=[],l=a("15ca"),n=a("305c"),o=a("466b"),d=a("977f"),r=a("0df0"),c=a("907c"),u=a("3e9d"),v=a("da25"),h=a("6418"),p={components:{Loading:l["a"],LabeledSelect:o["a"],ArrayList:d["a"],Checkbox:r["a"],Banner:h["a"]},mixins:[n["a"]],props:{credentialId:{type:String,required:!0},disabled:{type:Boolean,default:!1}},async fetch(){this.errors=[];try{this.credentialId&&(this.credential=await this.$store.dispatch("rancher/find",{type:c["u"].CLOUD_CREDENTIAL,id:this.credentialId}))}catch(t){this.credential=null}try{var e;this.regionOptions=await this.$store.dispatch("digitalocean/regionOptions",{credentialId:this.credentialId});let t="sfo3";var i;if(!this.regionOptions.find(e=>e.value===t))t=null===(i=this.regionOptions[0])||void 0===i?void 0:i.value;const s=this.value.region||(null===(e=this.credential)||void 0===e?void 0:e.defaultRegion)||t;this.value.region||(this.value.region=s),this.instanceOptions=await this.$store.dispatch("digitalocean/instanceOptions",{credentialId:this.credentialId,region:s});let l="s-2vcpu-4gb";var a;if(!this.instanceOptions.find(e=>e.value===l))l=null===(a=this.instanceOptions.find(e=>e.memoryGb>=4))||void 0===a?void 0:a.value,l||(l=this.instanceOptions[0].value);this.value.size||(this.value.size=l),this.imageOptions=await this.$store.dispatch("digitalocean/imageOptions",{credentialId:this.credentialId,region:s});let n="ubuntu-20-04-x64";this.imageOptions.find(e=>e.value===n)||(n=this.imageOptions[0].value),this.value.image||(this.value.image=n),this.updateUsername()}catch(t){this.errors=Object(u["c"])(t)}},data(){let e=null;return this.value.tags&&(e=this.value.tags.split(",")),{credential:null,regionOptions:null,imageOptions:null,instanceOptions:null,tags:e}},watch:{credentialId(){this.$fetch()},"value.image":"updateUsername"},computed:{isCreate(){return this.mode===v["m"]}},methods:{stringify:u["d"],updateUsername(){this.value.image.match(/rancheros/i)?this.value.sshUser="rancher":this.value.sshUser=void 0},updateTags(){this.$set(this.value,"tags",this.tags.join())}}},g=p,m=a("d802"),b=Object(m["a"])(g,t,s,!1,null,null,null);i["default"]=b.exports}}]);
//# sourceMappingURL=elemental-1.0.0.umd.min.machine-config4.js.map