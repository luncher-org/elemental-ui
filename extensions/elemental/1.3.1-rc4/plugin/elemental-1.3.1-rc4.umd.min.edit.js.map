{"version":3,"sources":["webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosversionchannel.vue","webpack://elemental-1.3.1-rc4/edit/elemental.cattle.io.managedosversionchannel.vue","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosversionchannel.vue?6ae2","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosversionchannel.vue?7f81","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.1-rc4/edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.machineregistration.vue?8665","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.machineregistration.vue?baf7","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.3.1-rc4/edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosimage.vue?57a5","webpack://elemental-1.3.1-rc4/./edit/elemental.cattle.io.managedosimage.vue?d684"],"names":["render","_vm","this","_c","_self","value","attrs","doneRoute","mode","errors","on","e","save","done","staticClass","_v","_s","t","model","callback","$$v","expression","spec","options","image","$set","trim","_e","staticRenderFns","name","components","Loading","LabeledInput","CruResource","NameNsDescription","mixins","CreateEditView","props","type","Object","required","String","component","isFormValid","class","hasBeenCreated","key","rerender","ref","editorMode","cloudConfig","isView","onFileSelected","_l","yamlErrors","err","i","directives","rawName","machineInventoryLabels","$event","updateLabels","machineInventoryAnnotations","setAnnotations","labels","setLabels","annotations","YamlEditor","KeyValue","Banner","FileSelector","Tabbed","Tab","resource","_CREATE","operatorVersion","getOperatorVersion","$store","newCloudConfigcompatibilityCheck","checkGatedFeatureCompatibility","MACH_REG_CONFIG_DEFAULTS","DEFAULT_CREATION_YAML","OLD_DEFAULT_CREATION_YAML","saferDump","data","watch","handler","neu","parsed","jsyaml","load","exceptionToErrorsArray","immediate","computed","isCreate","_EDIT","EDITOR_MODES","VIEW_CODE","EDIT_CODE","id","methods","saveCb","$router","replace","detailLocation","ev","keyLengthExceeded","keyPrefixLengthExceeded","keyNameLengthExceeded","labelLengthExceeded","keys","length","forEach","includes","prefix","split","push","$refs","yamleditor","updateValue","clusterTargetOptions","handleClusterTargetChange","clusterTargets","handleRadioBtnChange","useManagedOsImages","managedOSVersionOptions","handleManagedOSVersionNameChange","osVersionSelected","osImage","STRING_SEPARATOR","LabeledSelect","RadioGroup","hash","rancherClusters","dispatch","CAPI","RANCHER_CLUSTER","osGroups","ELEMENTAL_SCHEMA_IDS","MANAGED_OS_IMAGES","osVersions","MANAGED_OS_VERSIONS","osVersionChannels","MANAGED_OS_VERSION_CHANNELS","res","allHash","elementalClusters","filterForElementalClusters","_VIEW","_this$value","_this$value3","_this$value2","managedOSVersionName","_this$value4","targetsArray","ct","clusterName","targetableClusters","filterForUsedElementalClustersOnManagedOs","map","cluster","label","out","channel","versions","filter","version","_version$metadata","_this$value6","_version$metadata2","_version$spec","channelExists","metadata","ownerReferences","find","_this$value5","_channel$metadata","namespace","kind","v","val","_this$value7","_this$value8"],"mappings":"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","file":"elemental-1.3.1-rc4.umd.min.edit.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osversionchannels.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osversionchannels.create.spec')))]),_c('LabeledInput',{attrs:{\"data-testid\":\"os-version-channel-path\",\"label\":_vm.t('elemental.osversionchannels.create.registryUri.label'),\"placeholder\":_vm.t('elemental.osversionchannels.create.registryUri.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.options.image),callback:function ($$v) {_vm.$set(_vm.value.spec.options, \"image\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.options.image\"}})],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nexport default {\n  name:       'ManagedOsVersionChannelEditView',\n  components: {\n    Loading, LabeledInput, CruResource, NameNsDescription\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osversionchannels.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osversionchannels.create.spec') }}</h3>\n        <LabeledInput\n          v-model.trim=\"value.spec.options.image\"\n          data-testid=\"os-version-channel-path\"\n          :label=\"t('elemental.osversionchannels.create.registryUri.label')\"\n          :placeholder=\"t('elemental.osversionchannels.create.registryUri.placeholder', null, true)\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=template&id=55985480\"\nimport script from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.managedosversionchannel.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors,\"validation-passed\":_vm.isFormValid},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mb-40\",class:{'mt-40': !_vm.hasBeenCreated }},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.cloudConfiguration')))]),_c('YamlEditor',{key:_vm.rerender,ref:\"yamleditor\",staticClass:\"mb-20\",attrs:{\"editor-mode\":_vm.editorMode},model:{value:(_vm.cloudConfig),callback:function ($$v) {_vm.cloudConfig=$$v},expression:\"cloudConfig\"}}),(!_vm.isView)?_c('div',{staticClass:\"mb-20\"},[_c('FileSelector',{staticClass:\"btn role-secondary\",attrs:{\"data-testid\":\"read-from-file-btn\",\"label\":_vm.t('elemental.machineRegistration.create.readFromFile')},on:{\"selected\":_vm.onFileSelected}})],1):_vm._e(),_vm._l((_vm.yamlErrors),function(err,i){return _c('Banner',{key:i,attrs:{\"color\":\"error\",\"label\":err}})})],2)]),_c('div',{staticClass:\"row mb-40\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',{staticClass:\"mt-10\"},[_vm._v(\" \"+_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotations'))+\" \")]),_c('Tabbed',{attrs:{\"data-testid\":\"labels-and-annotations-block\"}},[_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineInv\",\"name\":\"machine-inventory\",\"data-testid\":\"mach-inv-tab\",\"weight\":3}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\",\"data-testid\":\"mach-inv-banner\"}},[_c('div',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)),expression:\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\"}]})]),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"data-testid\":\"add-label-mach-inv\",\"value\":_vm.value.machineInventoryLabels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.updateLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"data-testid\":\"add-annotation-mach-inv\",\"value\":_vm.value.machineInventoryAnnotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event, 'machineInventoryAnnotations', true)}}})],1)],1),_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineReg\",\"name\":\"machine-reg\",\"data-testid\":\"mach-reg-tab\",\"weight\":2}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\",\"data-testid\":\"mach-reg-banner\"}},[_c('div',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)),expression:\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\"}]})]),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"data-testid\":\"add-label-mach-reg\",\"value\":_vm.value.labels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"data-testid\":\"add-annotation-mach-reg\",\"value\":_vm.value.annotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event)}}})],1)],1)],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { Banner } from '@components/Banner';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\n\nimport { getOperatorVersion, checkGatedFeatureCompatibility, MACH_REG_CONFIG_DEFAULTS } from '../utils/feature-versioning';\nimport { OLD_DEFAULT_CREATION_YAML, DEFAULT_CREATION_YAML } from '../models/elemental.cattle.io.machineregistration';\n\nexport default {\n  name:       'MachineRegistrationEditView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    KeyValue,\n    Banner,\n    FileSelector,\n    NameNsDescription,\n    Tabbed,\n    Tab\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n    resource: {\n      type:     String,\n      required: true\n    },\n  },\n  async fetch() {\n    // in CREATE mode, since YAMLEditor doesn't live update, we need to force a re-render of the component for it to update\n    if (this.mode === _CREATE) {\n      const operatorVersion = await getOperatorVersion(this.$store);\n\n      this.newCloudConfigcompatibilityCheck = checkGatedFeatureCompatibility(this.resource, this.mode, MACH_REG_CONFIG_DEFAULTS, operatorVersion);\n\n      if (!this.value.spec) {\n        this.value.spec = this.newCloudConfigcompatibilityCheck ? DEFAULT_CREATION_YAML : OLD_DEFAULT_CREATION_YAML;\n      }\n\n      this.cloudConfig = typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec);\n      this.rerender = true;\n    }\n  },\n  data() {\n    return {\n      rerender:                         false,\n      cloudConfig:                      typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      newCloudConfigcompatibilityCheck: false,\n      yamlErrors:                       null,\n      isFormValid:                      true\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  methods: {\n    async save(saveCb) {\n      this.errors = [];\n      try {\n        await this.value.save();\n        saveCb(true);\n\n        if (this.isCreate) {\n          this.$router.replace(this.value.detailLocation);\n        } else {\n          this.done();\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        saveCb(false);\n      }\n    },\n    updateLabels(ev) {\n      this.value.setLabels(ev, 'machineInventoryLabels', true);\n      let keyLengthExceeded = false;\n      let keyPrefixLengthExceeded = false;\n      let keyNameLengthExceeded = false;\n      let labelLengthExceeded = false;\n\n      this.errors = [];\n\n      if (this.value.spec.machineInventoryLabels && Object.keys(this.value.spec.machineInventoryLabels).length) {\n        Object.keys(this.value.spec.machineInventoryLabels).forEach((key) => {\n          // check length of \"key\" in key-value\n          if (key.includes('/')) {\n            const prefix = key.split('/')[0];\n            const name = key.split('/')[1];\n\n            if (prefix.length > 253) {\n              keyPrefixLengthExceeded = true;\n            }\n\n            if (name.length > 63) {\n              keyNameLengthExceeded = true;\n            }\n          } else if (key.length > 63) {\n            keyLengthExceeded = true;\n          }\n\n          // check length of \"value\" in key-value\n          if (this.value.spec.machineInventoryLabels[key].length > 63) {\n            labelLengthExceeded = true;\n          }\n        });\n      }\n\n      if (labelLengthExceeded || keyLengthExceeded || keyPrefixLengthExceeded || keyNameLengthExceeded) {\n        if (labelLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelValueLength'));\n        }\n        if (keyLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyLength'));\n        }\n        if (keyPrefixLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyPrefixLength'));\n        }\n        if (keyNameLengthExceeded) {\n          this.isFormValid = false;\n          this.errors.push(this.t('elemental.machineRegistration.validation.machineInventoryLabelKeyNameLength'));\n        }\n      } else {\n        this.isFormValid = true;\n      }\n    },\n    onFileSelected(value) {\n      const component = this.$refs.yamleditor;\n\n      if (component) {\n        component.updateValue(value);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"isFormValid\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mb-40\"\n      :class=\"{'mt-40': !hasBeenCreated }\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.create.configuration') }}</h3>\n        <NameNsDescription\n          v-model=\"value\"\n          :mode=\"mode\"\n          :description-hidden=\"true\"\n          :namespaced=\"false\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          :key=\"rerender\"\n          ref=\"yamleditor\"\n          v-model=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n        <div\n          v-if=\"!isView\"\n          class=\"mb-20\"\n        >\n          <FileSelector\n            class=\"btn role-secondary\"\n            data-testid=\"read-from-file-btn\"\n            :label=\"t('elemental.machineRegistration.create.readFromFile')\"\n            @selected=\"onFileSelected\"\n          />\n        </div>\n        <Banner\n          v-for=\"(err, i) in yamlErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-40\">\n      <div class=\"col span-12\">\n        <h3 class=\"mt-10\">\n          {{ t('elemental.machineRegistration.create.labelsAndAnnotations') }}\n        </h3>\n        <Tabbed data-testid=\"labels-and-annotations-block\">\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineInv\"\n            name=\"machine-inventory\"\n            data-testid=\"mach-inv-tab\"\n            :weight=\"3\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              data-testid=\"mach-inv-banner\"\n            >\n              <div v-clean-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\" />\n            </Banner>\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                data-testid=\"add-label-mach-inv\"\n                :value=\"value.machineInventoryLabels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"updateLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                data-testid=\"add-annotation-mach-inv\"\n                :value=\"value.machineInventoryAnnotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event, 'machineInventoryAnnotations', true)\"\n              />\n            </div>\n          </Tab>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineReg\"\n            name=\"machine-reg\"\n            data-testid=\"mach-reg-tab\"\n            :weight=\"2\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              data-testid=\"mach-reg-banner\"\n            >\n              <div v-clean-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\" />\n            </Banner>\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                data-testid=\"add-label-mach-reg\"\n                :value=\"value.labels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                data-testid=\"add-annotation-mach-reg\"\n                :value=\"value.annotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event)\"\n              />\n            </div>\n          </Tab>\n        </Tabbed>\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=66279357&scoped=true\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66279357\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.spec')))]),_c('LabeledSelect',{staticClass:\"mb-20\",attrs:{\"data-testid\":\"cluster-target\",\"label\":_vm.t('elemental.osimage.create.targetCluster.label'),\"placeholder\":_vm.t('elemental.osimage.create.targetCluster.placeholder', null, true),\"mode\":_vm.mode,\"options\":_vm.clusterTargetOptions,\"multiple\":true},on:{\"input\":function($event){return _vm.handleClusterTargetChange($event)}},model:{value:(_vm.clusterTargets),callback:function ($$v) {_vm.clusterTargets=$$v},expression:\"clusterTargets\"}}),_c('RadioGroup',{staticClass:\"mb-20\",attrs:{\"data-testid\":\"upgrade-choice-selector\",\"name\":\"os-image-mode\",\"options\":[true, false],\"labels\":[_vm.t('elemental.osimage.create.radioOptions.osImages'), _vm.t('elemental.osimage.create.radioOptions.registry')],\"mode\":_vm.mode},on:{\"input\":function($event){return _vm.handleRadioBtnChange($event)}},model:{value:(_vm.useManagedOsImages),callback:function ($$v) {_vm.useManagedOsImages=$$v},expression:\"useManagedOsImages\"}}),(_vm.useManagedOsImages)?_c('div',[_c('LabeledSelect',{attrs:{\"data-testid\":\"os-version-box\",\"mode\":_vm.mode,\"options\":_vm.managedOSVersionOptions,\"label-key\":\"elemental.osimage.create.managedOsImage.label\",\"placeholder\":_vm.t('elemental.osimage.create.managedOsImage.placeholder', null, true),\"option-key\":\"value\"},on:{\"input\":function($event){return _vm.handleManagedOSVersionNameChange($event)}},model:{value:(_vm.osVersionSelected),callback:function ($$v) {_vm.osVersionSelected=$$v},expression:\"osVersionSelected\"}})],1):_c('div',[_c('LabeledInput',{attrs:{\"data-testid\":\"os-image-box\",\"label\":_vm.t('elemental.osimage.create.osImage.label'),\"placeholder\":_vm.t('elemental.osimage.create.osImage.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.osImage),callback:function ($$v) {_vm.$set(_vm.value.spec, \"osImage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.osImage\"}})],1)],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { allHash } from '@shell/utils/promise';\nimport { _CREATE, _EDIT, _VIEW } from '@shell/config/query-params';\nimport { CAPI } from '@shell/config/types';\nimport { ELEMENTAL_SCHEMA_IDS } from '../config/elemental-types';\nimport {\n  filterForElementalClusters,\n  filterForUsedElementalClustersOnManagedOs\n} from '../utils/elemental-utils';\n\nconst STRING_SEPARATOR = '_***_';\n\nexport default {\n  name:       'ManagedOsImagesEditView',\n  components: {\n    Loading, LabeledInput, LabeledSelect, CruResource, NameNsDescription, RadioGroup\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  async fetch() {\n    const hash = {};\n\n    hash.rancherClusters = this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER });\n    hash.osGroups = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_IMAGES });\n    hash.osVersions = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_VERSIONS });\n    hash.osVersionChannels = this.$store.dispatch('management/findAll', { type: ELEMENTAL_SCHEMA_IDS.MANAGED_OS_VERSION_CHANNELS });\n\n    const res = await allHash(hash);\n\n    this.elementalClusters = filterForElementalClusters(res.rancherClusters || []);\n    this.osGroups = res.osGroups || [];\n    this.osVersions = res.osVersions || [];\n    this.osVersionChannels = res.osVersionChannels || [];\n\n    if ((this.mode === _EDIT || this.mode === _VIEW)) {\n      // populate OS version selected\n      if (this.value?.spec?.managedOSVersionName) {\n        this.osVersionSelected = this.value?.spec?.managedOSVersionName;\n        this.useManagedOsImages = true;\n      } else {\n        this.useManagedOsImages = false;\n      }\n\n      // populate cluster targets selected\n      if (this.value?.spec?.clusterTargets?.length) {\n        const targetsArray = [];\n\n        this.value?.spec?.clusterTargets.forEach((ct) => {\n          targetsArray.push(ct.clusterName);\n        });\n\n        this.clusterTargets = targetsArray;\n      }\n    }\n  },\n  data() {\n    return {\n      elementalClusters:  [],\n      osGroups:           [],\n      osVersions:         [],\n      osVersionChannels:  [],\n      clusterTargets:     [],\n      useManagedOsImages: true,\n      osVersionSelected:  ''\n    };\n  },\n  computed: {\n    clusterTargetOptions() {\n      const targetableClusters = filterForUsedElementalClustersOnManagedOs(this.elementalClusters, this.osGroups);\n\n      return targetableClusters.map((cluster) => {\n        return {\n          label: cluster.name,\n          value: cluster.name\n        };\n      });\n    },\n    managedOSVersionOptions() {\n      const out = [];\n\n      this.osVersionChannels.forEach((channel) => {\n        const versions = this.osVersions.filter((version) => {\n          // use only the same namespace as the OS groups for now...\n          const channelExists = version.metadata?.ownerReferences.find(ref => ref.name === channel.name && this.value?.metadata?.namespace === channel.metadata?.namespace);\n\n          return channelExists && Object.keys(channelExists).length && this.value?.metadata?.namespace === version.metadata?.namespace && version.spec?.type === 'container';\n        });\n\n        if (versions.length) {\n          out.push({\n            kind:  'group',\n            label: this.t('elemental.osimage.create.managedOsImage.channel', { name: channel.name }),\n            value: this.t('elemental.osimage.create.managedOsImage.channel', { name: channel.name })\n          });\n\n          versions.forEach((v) => {\n            out.push({\n              label: v.name,\n              value: `${ channel.name }${ STRING_SEPARATOR }${ v.name }`\n            });\n          });\n        }\n      });\n\n      return out;\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n  methods: {\n    handleClusterTargetChange(ev) {\n      this.value.spec.clusterTargets = ev.map((val) => {\n        return { clusterName: val };\n      });\n    },\n    handleManagedOSVersionNameChange(ev) {\n      this.value.spec.managedOSVersionName = ev.split(STRING_SEPARATOR)[1];\n    },\n    handleRadioBtnChange(val) {\n      // if TRUE, this mean we are on option \"use managed OS version\"\n      // so we should clear the \"image path\" (OS image) field\n      if (val) {\n        delete this.value?.spec?.osImage;\n      } else {\n        delete this.value?.spec?.managedOSVersionName;\n        this.osVersionSelected = '';\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osimage.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osimage.create.spec') }}</h3>\n        <LabeledSelect\n          v-model=\"clusterTargets\"\n          class=\"mb-20\"\n          data-testid=\"cluster-target\"\n          :label=\"t('elemental.osimage.create.targetCluster.label')\"\n          :placeholder=\"t('elemental.osimage.create.targetCluster.placeholder', null, true)\"\n          :mode=\"mode\"\n          :options=\"clusterTargetOptions\"\n          :multiple=\"true\"\n          @input=\"handleClusterTargetChange($event)\"\n        />\n        <RadioGroup\n          v-model=\"useManagedOsImages\"\n          class=\"mb-20\"\n          data-testid=\"upgrade-choice-selector\"\n          name=\"os-image-mode\"\n          :options=\"[true, false]\"\n          :labels=\"[t('elemental.osimage.create.radioOptions.osImages'), t('elemental.osimage.create.radioOptions.registry')]\"\n          :mode=\"mode\"\n          @input=\"handleRadioBtnChange($event)\"\n        />\n        <div v-if=\"useManagedOsImages\">\n          <LabeledSelect\n            v-model=\"osVersionSelected\"\n            data-testid=\"os-version-box\"\n            :mode=\"mode\"\n            :options=\"managedOSVersionOptions\"\n            label-key=\"elemental.osimage.create.managedOsImage.label\"\n            :placeholder=\"t('elemental.osimage.create.managedOsImage.placeholder', null, true)\"\n            option-key=\"value\"\n            @input=\"handleManagedOSVersionNameChange($event)\"\n          />\n        </div>\n        <div v-else>\n          <LabeledInput\n            v-model.trim=\"value.spec.osImage\"\n            data-testid=\"os-image-box\"\n            :label=\"t('elemental.osimage.create.osImage.label')\"\n            :placeholder=\"t('elemental.osimage.create.osImage.placeholder', null, true)\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosimage.vue?vue&type=template&id=65be2882\"\nimport script from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}